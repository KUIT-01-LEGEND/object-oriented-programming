# 추상화를 통한 복잡성 극복

<aside>

추상화

어떤 양상, 세부사항, 구조를 좀 더 명확하게 이해하기 위해 특정 절차나 물체를 의도적으로 생략하거나 감춤으로써 복잡도를 극복하는 방법

복잡성을 다루기 위해 추상화는 두 차원에서 이뤄짐

- 구체적인 사물들 간의 공통점은 취하고 차이점은 버리는 일반화를 통해 단순하게 만드는 것
- 중요한 부분을 강조하기 위해 불필요한 세부사항을 제거함으로써 단순하게 만드는 것

모든 경우에 추상화의 목적은 복잡성을 이해하기 쉬운 수준으로 단순화하는 것임

</aside>

- 객체지향 패러다임은 객체라는 추상화를 통해 현실의 복잡성을 극복함

## 객체지향과 추상화

### 개념

- 앨리스는 정원에 있는 인물들을 트럼프의 그룹과 토끼의 그룹으로 나눔
- 앨리스는 인물들의 차이점을 의도적으로 무시하고 공통점만을 강조함으로써 ‘트럼프’라는 그룹에 속할 수 있는 인물들을 취사선택함
- 인물들의 차이점을 무시하고 공통점만을 취해 트럼프라는 개념으로 단순화한 것은 추상화의 일종임
- 공통점을 기반으로 객체들을 묶기 위한 그릇을 **개념**이라고 한다.
- 개념을 이용하면 객체를 여러 그룹으로 **분류**할 수 있음
- 객체란 특정 개념을 적용할 수 있는 구체적인 사물을 의미함
- 객체에 어떤 개념을 적용하는 것이 가능해서 개념 그룹의 일원이 될 때 객체를 그 개념의 **인스턴스**라고 한다.

### 개념의 세 가지 관점

- 심볼: 개념을 가리키는 간략한 이름이나 명칭

  (트럼프, 토끼)

- 내연: **개념의 완전한 정의**를 나타내며 내연의 의미를 이용해 객체가 개념에 속하는지 여부를 확인할 수 있음

  (몸이 납작하고 두 손과 두 발이 네모난 몸 모서리에 달려있다는 트럼프에 대한 설명)

- 외연: 개념에 속하는 모든 객체의 집합, 개념의 인스턴스들이 모여 이뤄진 집합

  (정원사, 병사, 신하, 왕자와 공주, 하겍으로 참석한 왕과 왕비들, 하트잭, 하트왕과 하트왕비)

- 개념이 심볼, 내연, 외연으로 구성돼 있다는 사실보다는 개념을 이용해 객체를 분류할 수 있다는 사실이 더 중요함

### 객체를 분류하기 위한 틀

- 분류란 객체에 특정한 개념을 적용하는 작업
- 객체에 어떤 개념을 적용할 것인지를 결정하는 것은 결국 객체들을 개념에 따라 분류하는 것과 동일함
- **객체를 적절한 개념에 따라 분류**한 애플리케이션은 유지보수가 용이하고 변경에 유연하게 대처 가능

### 분류는 추상화를 위한 도구다

- 정원사, 병사, 신하, 왕자와 공주, 하겍으로 참석한 왕과 왕비들, 하트잭, 하트왕과 하트왕비를 트럼프라는 개념으로 묶은 것은 개별 객체 간의 차이점은 무시하고 공통점은 취한 결과다
- 따라서 **개념은 추상화의 첫 번째 차원인 일반화를 적용한 결과**다
- **개념은 객체들의 복잡성을 극복하기 위한 추상화 도구**다

## 타입

### 타입은 개념이다

- 타입은 개념과 동일하다
- 타입이란 객체에 적용할 수 있는 아이디어나 관념을 의미한다
- 어떤 객체에 타입을 적용할 수 있을 때 그 객체를 타입의 인스턴스라고 한다.

### 객체와 타입

- 객체가 협력을 위해 어떤 책임을 지녀야 하는지를 결정하는 것이 객체지향 설계의 핵심이다.
- 다음 두 가지 조언으로부터 객체지향 설계에 대한 중요한 원칙을 이끌어 낼 수 있음
    1. **어떤 객체가 어떤 타입에 속하는지를 결정하는 것은 객체가 수행하는 행동이다**
        1. 어떤 객체들이 동일한 행동을 수행할 수 있다면 그 객체들은 동일한 타입으로 분류될 수 있다
    2. **객체의 내부적인 표현은 외부로부터 철저하게 감춰진다**
        1. 객체의 행동을 가장 효과적으로 수행할 수만 있다면 객체 내부의 상태를 어떤 방식으로 표현하더라도 무방하다

### 행동이 우선이다

- **객체의 타입을 결정하는 것은 객체의 행동뿐**이다
- 동일한 타입에 속한 객체는 내부의 표현 방식이 다르기 때문에 동일한 메시지를 처리하는 방식은 서로 다를 수밖에 없음 → **다형성**
- 다형성이란 동일한 요청에 대해 서로 다른 방식으로 응답할 수 있는 능력임
- 다형적인 객체들은 동일한 타입에 속함

---

- 객체의 타입을 결정하는 것은 객체의 행동뿐이므로 외부로부터 데이터를 감춰야 함
- 훌륭한 객체지향 설계는 외부에 행동만을 제공하고 데이터는 행동 뒤로 감춰야 한다 → **캡슐화**
- 캡슐화는 객체를 행동에 따라 분류하기 위해 지켜야 하는 기본적인 원칙이다.

---

- 객체가 외부에 제공해야 하는 책임을 먼저 결정하고 그 책임을 수행하는 데 적합한 데이터를 나중에 결정한 후, 데이터를 책임을 수행하는 데 필요한 외부 인터페이스 뒤로 캡슐화 해야한다
- 데이터를 먼저 결정하고 객체의 책임을 결정하는 방법은 유연하지 못한 설계임
- **책임-주도 설계**라는 객체지향 설계 방법은 데이터-주도 설계 방법의 단점을 개선하기 위해 고안됨

> 객체를 결정하는 것은 행동이다. 데이터는 단지 행동을 따를 뿐이다
>

## 타입의 계층

- 트럼프는 트럼프 인간을 포괄하는 좀 더 일반적인 개념이다.
- 트럼프 인간은 트럼프보다 좀 더 특화된 행동을 하는 특수한 개념이다
- 두 개념 사이의 관계를 일반화/특수화 관계라고 한다

### 일반화/특수화 관계

- 객체지향에서 일반화/특수화 관계를 결정하는 것은 객체의 상태를 표현하는 데이터가 아니라 행동임
- 일반화/특수화 관계가 성립하려면 한 타입이 다른 타입보다 더 특수하게 행동해야 하고, 반대로 한 타입은 다른 타입보다 더 일반적으로 행동해야 함
- 특수한 타입은 일반적인 타입이 할 수 있는 모든 행동을 동일하게 수행할 수 있어야 함
- 일반화/특수화 관계에서 일반적인 타입은 특수한 타입보다 더 적은 수의 행동을 가지지만 더 큰 크기의 외연 집합을 가진다

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/4bad1fe2-f73e-41d3-b5e9-0072cd6b7716/98812349-edd9-4af9-9405-123c7e02d73f/image.png)

### 슈퍼타입과 서브타입

- 일반적인 타입을 슈퍼타입, 특수한 타입을 서브타입이라 함
- 서브타입은 슈퍼타입의 행위와 호환되기 때문에 서브타입은 슈퍼타입을 대체할 수 있어야 함
- 서브타입은 슈퍼타입의 행위에 추가적으로 특수한 자신만의 행동을 추가하는 것이므로 슈퍼타입의 행동은 서브타입에게 자동으로 상속된다

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/4bad1fe2-f73e-41d3-b5e9-0072cd6b7716/a25ecce5-d820-414f-a173-2c623e5e65f5/image.png)

### 일반화는 추상화를 위한 도구다

- 정원에 있던 인물들의 차이점은 무시하고 공통점은 취함으로써 공통의 타입인 트럼프 인간으로 분류함
- 트럼프 인간을 단순한 관점에서 바라보기 위해 불필요한 특성을 배제하고 더 포괄적인 의미를 지닌 트럼프로 일반화함
- **일반화/특수화 계층은 객체지향 패러다임에서 추상화의 두 번째 차원을 적절하게 활용하는 대표적인 예**임

## 정적 모델

### 타입의 목적

- 타입을 사용하는 이유는 인간의 인지 능력으로는 시간에 따라 동적으로 변하는 객체의 복잡성을 극복하기가 너무 어렵기 때문
- 타입은 시간에 따라 동적으로 변하는 앨리스의 상태를 시간과 독립적인 정적인 모습으로 다룰 수 있게 해줌
- 시간이라는 복잡성 제거함

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/4bad1fe2-f73e-41d3-b5e9-0072cd6b7716/caddb4d5-c7d9-471b-9668-1b1bd653c476/image.png)

### 타입은 추상화다

- 타입을 이용하면 객체의 동적인 특성을 추상화할 수 있다
- 타입은 시간에 따른 상태 변경이라는 복잡성을 단순화할 수 있는 효과적인 방법임

### 동적 모델과 정적 모델

- 객체지향 모델링을 위한 표준 언어인 UML에서 스냅샷은 객체 다이어그램(object diagram)[Fowler 2003]이라고도 불린다. 스냅샷처럼 실제로 객체가 살아 움직이는 동안 상태가 어떻게 변하고 어떻게 행동하는지를 포착하는 것을 ***동적 모델(***dynamic model)이라고 한다.
- 다른 하나는 객체가 가질 수 있는 모든 상태와 모든 행동을 시간에 독립적으로 표현하는 것이다. 일반적으로 이런 모델을 타입 모델(type diagram)이라고한다.이 모델은 동적으로 변하는 객체의 상태가 아니라 객체가 속한 타입의 정적인 모습을 표현하기 때문에 ***정적 모델***(static mod이)이라고도 한다.
- 객체지향 애플리케이션을 설계하고 구현하기 위해 객체 관점의 동적 모델과 객체를 추상화한 타입 관점의 정적 모델을 적절히 혼용해야 한다

### 클래스

- ***객체를 분류하는 기준은 타입이며, 타입을 나누는 기준은 객체가 수행하는 행동이라는 사실이 중요하다.***
- 객체를 분류하기 위해 타입을 결정한 후 프로그래밍 언어를 이용해 타입을 구현할 수 있는 한 가지 방법이 클래스일 뿐인 것이다.
- **객체지향에서 중요한 것은 동적으로 변하는 객체의 ‘상태’와 상태를 변경하는 ‘행위’**다.