# 2. 이상한 나라의 객체

## 객체지향과 인지 능력

- 인간은 본능적으로 세상을 독립적이고 식별 가능한 객체의 집합으로 바라본다. 객체지향 패러다임은 이러한 인간의 본능을 기반으로 두고 있기 때문에 이해하기 쉬운 패러다임이다.
- 객체지향 패러다임의 목적은 현실 세계를 기반으로 새로운 세계를 창조하는 것이다.

## 객체, 그리고 소프트웨어 나라

(객체를 앨리스로 바꿔서 생각하면 이해가 잘 됨)

- 객체는 **상태**(state), **행동**(behavior), **식별자**(identity)를 지닌 실체이다.
- 객체의 행동에 따라 객체의 상태가 변한다.
- 행동의 결과는 이번에 어떤 행동들이 발생했는지에 영향을 받는다.
- 행동의 결과는 객체의 (행동 이전) 상태에 의존적이다. 이전 상태에 따라 행동의 결과가 달라지기 때문이다.
- 객체는 상태 변경과 무관하게 유일한 존재로 식별 가능하다. (앨리스는 키가 커져도/작아져도 앨리스이다.)

## 객체의 특성

### 상태(state)

- 행동의 결과는 이번에 어떤 행동들이 발생했는지에 영향을 받는다. 하지만 과거에 발생했던 모든 행동을 기억하기는 어렵기 때문에 인간은 행동의 결과를 단순하게 기술하기 위해 **상태**라는 개념을 고안했다.
- = 행동의 결과는 (행동 이전) 객체의 상태에 의존적이다.
- = 상태를 이용하면 과거의 모든 행동 이력을 설명하지 않고도 행동의 결과를 쉽게 예측하고 설명할 수 있다.
- 상태는 객체의 복잡성을 완화해준다.

- 조합 : 객체를 사용해 다른 객체의 상태를 표현 (= 링크, 객체와 객체 사이의 의미있는 연결)

  객체가 다른 객체를 참조한 경우

- 객체의 상태는 단순한 값을 의미하는 **속성**(정적)과 링크를 의미하는 **객체의 조합**(동적)으로 표현할 수 있다.
- 객체의 상태를 구성하는 모든 요소들을 통틀어 **객체의 property**라고 한다.

#### 캡슐화

- 객체는 자율적인 존재이다. 따라서 외부에서 상태에 직접 접근할 수 없고 내부에서만 자율적으로 상태를 변경할 수 있다. 이러한 특성은 캡슐화와 관련 있다.
- 캡슐화 : 객체는 상태를 외부로 노출하지 않는다. 객체가 외부로 노출하는 것은 행동 뿐이며, 외부에서 객체에 접근할 수 있는 유일한 방법 역시 행동 뿐이다.
- 캡슐화의 효과 : 객체의 자율성을 높인다. 자율성이 높아질수록 협력이 유연하고 단순해진다.

#### 값 vs 객체

|        |                단순한 값                 |                   객체                    |
|:------:|:------------------------------------:|:---------------------------------------:|
|   예시   |     숫자, 문자열, 양, 속도, 시간, 날짜, 참/거짓     |                  동적 관계                  |
|   특징   |        객체의 상태(특성)을 표현하는데 사용됨         |                                         |
|  식별자   |     객체가 아닌 단순한 값은 식별자를 가지지 않는다.      |            모든 객체는 식별자를 갖는다.             |
|   상태   | 상태가 변하지 않는다. 불변 상태 (immutable state) | 시간에 따라 상태가 변경된다. 가변 상태 (mutable state)  |
| 같은지 판단 |       상태로 판단 = 동등성 (equality)        | (상태 변경에 독립적인) 식별자로 판단 = 동일성 (identical) |
| 지칭 용어  |         값 객체 (value object)          | 참조 객체 (reference object), 엔티티 (entity)  |

### 행동(behavior)

- 객체의 행동은 객체의 상태를 변경시킨다.
- 행동의 결과는 객체의 상태에 의존적이다.

- 객체와 협력하는 유일한 방법은 요청(메시지)을 보내는 행동이다.
- 행동의 구성 요소
    - 쿼리 (query) : 객체의 상태를 조회하는 행동
    - 명령 (command) : 객체의 상태를 변경하는 행동

### 식별자(identity)

- 식별자 : 객체를 서로 구별할 수 있는 특정한 프로퍼티

## 행동이 상태를 결정한다.

💥 상태를 먼저 결정하고 행동을 나중에 결정하는 방법 => 나쁜 설계 (캡슐화 + 협력 + 재사용성 저해)

🌟상태가 아니라 행동에 초점을 맞춰라!! (책임-주도 설계, Responsibility-Driven Design)

1. 애플리케이션에 필요한 **협력**을 생각하기
2. 협력에 필요한 **행동**을 생각하기
3. 행동을 수해할 **객체 선택**
4. 필요한 **상태** 결정하기

## 은유와 객체

- 객체지향이란 현실 세계의 모방이다. / 현실 세계의 추상화이다. (X)
- 현실 속에서 수동적인 존재가 소프트웨어 객체로 구현될 때에는 능동적으로 변한다. (O)
